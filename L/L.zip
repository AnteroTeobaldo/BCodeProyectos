data:application/zip;base64,UEsDBAoAAAAAANowMFyCWnkYzZQAAM2UAAABAAAATAo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgogICAgPHRpdGxlPkdhbGF4eSBvZiBMb3ZlPC90aXRsZT4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9UGFjaWZpY28mZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi4wLjAvY3NzL2FsbC5taW4uY3NzIj4KICAgIDxzdHlsZT4KICAgICAgICAqIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIH0KCiAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IEdlb3JnaWEsIHNlcmlmOwogICAgICAgIH0KCiAgICAgICAgLndlYmdsIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAvKiBGbG9hdGluZyBDU1MgaGVhcnRzIGluIGJhY2tncm91bmQgKi8KICAgICAgICAuaGVhcnQgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMTAwLCAxMDAsIDAuMTUpOwogICAgICAgICAgICBmb250LXNpemU6IDI0cHg7CiAgICAgICAgICAgIGFuaW1hdGlvbjogZmxvYXQgMTVzIGluZmluaXRlIGVhc2UtaW4tb3V0OwogICAgICAgICAgICB6LWluZGV4OiAwOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICB9CgogICAgICAgIEBrZXlmcmFtZXMgZmxvYXQgewogICAgICAgICAgICAwJSwgMTAwJSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCkgcm90YXRlKDBkZWcpOwogICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zOwogICAgICAgICAgICB9CiAgICAgICAgICAgIDUwJSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTIwcHgpIHJvdGF0ZSgxMGRlZyk7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC5jcmVkaXRzIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICBib3R0b206IDE1cHg7CiAgICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQYWNpZmljbycsIGN1cnNpdmU7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogCiAgICAgICAgICAgICAgICAwIDAgM3B4ICNmZmYsCiAgICAgICAgICAgICAgICAwIDAgNnB4ICNmZmYsCiAgICAgICAgICAgICAgICAwIDAgMTBweCAjZmY2MDMwLAogICAgICAgICAgICAgICAgMCAwIDE1cHggI2ZmNjAzMDsKICAgICAgICAgICAgei1pbmRleDogMTA7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuaW5zdHJ1Y3Rpb25zIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDIwcHg7CiAgICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpOwogICAgICAgICAgICBmb250LWZhbWlseTogR2VvcmdpYSwgc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNXB4KTsKICAgICAgICAgICAgei1pbmRleDogMTA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8qIE1lbsO6IGRlIGNvbmZpZ3VyYWNpw7NuICovCiAgICAgICAgLm1lbnUtYnV0dG9uIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDE1cHg7CiAgICAgICAgICAgIGxlZnQ6IDE1cHg7CiAgICAgICAgICAgIHdpZHRoOiA0MHB4OwogICAgICAgICAgICBoZWlnaHQ6IDQwcHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC40KTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB6LWluZGV4OiAyMDsKICAgICAgICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDVweCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5tZW51LWJ1dHRvbiBzcGFuIHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOiAyMHB4OwogICAgICAgICAgICBoZWlnaHQ6IDJweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIG1hcmdpbjogMnB4IDA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDFweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbmZpZy1wYW5lbCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBsZWZ0OiAtMzIwcHg7CiAgICAgICAgICAgIHdpZHRoOiAzMDBweDsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDEwLCAxMCwgMjAsIDAuOTUpOwogICAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7CiAgICAgICAgICAgIHotaW5kZXg6IDE1OwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBsZWZ0IDAuM3MgZWFzZTsKICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsIDk2LCA0OCwgMC4zKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbmZpZy1wYW5lbC5vcGVuIHsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbmZpZy1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY29uZmlnLXRpdGxlIHsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBmb250LWZhbWlseTogJ1BhY2lmaWNvJywgY3Vyc2l2ZTsKICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2xvc2UtYnV0dG9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB3aWR0aDogMzBweDsKICAgICAgICAgICAgaGVpZ2h0OiAzMHB4OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jbG9zZS1idXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb25maWctc2VjdGlvbiB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMzAsIDMwLCA0MCwgMC42KTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbmZpZy1zZWN0aW9uIGgzIHsKICAgICAgICAgICAgY29sb3I6ICNmZjYwMzA7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnUGFjaWZpY28nLCBjdXJzaXZlOwogICAgICAgICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb25maWctb3B0aW9uIHsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbmZpZy1vcHRpb24gbGFiZWwgewogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbmZpZy1vcHRpb24gaW5wdXRbdHlwZT0icmFuZ2UiXSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDZweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbmZpZy1vcHRpb24gaW5wdXRbdHlwZT0icmFuZ2UiXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIgewogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIHdpZHRoOiAxNnB4OwogICAgICAgICAgICBoZWlnaHQ6IDE2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmNjAzMDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIH0KCiAgICAgICAgLnRvZ2dsZS1zd2l0Y2ggewogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDUwcHg7CiAgICAgICAgICAgIGhlaWdodDogMjRweDsKICAgICAgICB9CgogICAgICAgIC50b2dnbGUtc3dpdGNoIGlucHV0IHsKICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgd2lkdGg6IDA7CiAgICAgICAgICAgIGhlaWdodDogMDsKICAgICAgICB9CgogICAgICAgIC5zbGlkZXIgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICByaWdodDogMDsKICAgICAgICAgICAgYm90dG9tOiAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjOwogICAgICAgICAgICB0cmFuc2l0aW9uOiAuNHM7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI0cHg7CiAgICAgICAgfQoKICAgICAgICAuc2xpZGVyOmJlZm9yZSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgY29udGVudDogIiI7CiAgICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgIGxlZnQ6IDRweDsKICAgICAgICAgICAgYm90dG9tOiA0cHg7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICB0cmFuc2l0aW9uOiAuNHM7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICB9CgogICAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNjAzMDsKICAgICAgICB9CgogICAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyOmJlZm9yZSB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgyNnB4KTsKICAgICAgICB9CgogICAgICAgIC5jb2xvci1vcHRpb25zIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZ2FwOiAxMHB4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb2xvci1vcHRpb24gewogICAgICAgICAgICB3aWR0aDogMzBweDsKICAgICAgICAgICAgaGVpZ2h0OiAzMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY29sb3Itb3B0aW9uOmhvdmVyIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY29sb3Itb3B0aW9uLmFjdGl2ZSB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xNSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5kZXZlbG9wZXItaW5mbyB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjAsIDIwLCAzMCwgMC44KTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgOTYsIDQ4LCAwLjMpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuZGV2ZWxvcGVyLWluZm8gaDMgewogICAgICAgICAgICBjb2xvcjogI2ZmNjAzMDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQYWNpZmljbycsIGN1cnNpdmU7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmRldmVsb3Blci1pbmZvIHAgewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC53aGF0c2FwcC1saW5rIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjVEMzY2OwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNnB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyNXB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLndoYXRzYXBwLWxpbms6aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMTI4QzdFOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgzNywgMjExLCAxMDIsIDAuNCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC53aGF0c2FwcC1saW5rIGkgewogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgIH0KICAgICAgICAKICAgICAgICAub3ZlcmxheSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICAgICAgICAgIHotaW5kZXg6IDE0OwogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAub3ZlcmxheS5hY3RpdmUgewogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAgICAgICAgIC5jcmVkaXRzIHsgZm9udC1zaXplOiAxNHB4OyBib3R0b206IDEwcHg7IH0KICAgICAgICAgICAgLmluc3RydWN0aW9ucyB7IGZvbnQtc2l6ZTogMTJweDsgcGFkZGluZzogNnB4IDEycHg7IH0KICAgICAgICAgICAgLm1lbnUtYnV0dG9uIHsgdG9wOiAxMHB4OyBsZWZ0OiAxMHB4OyB3aWR0aDogMzZweDsgaGVpZ2h0OiAzNnB4OyB9CiAgICAgICAgICAgIC5tZW51LWJ1dHRvbiBzcGFuIHsgd2lkdGg6IDE4cHg7IH0KICAgICAgICAgICAgLmNvbmZpZy1wYW5lbCB7IHdpZHRoOiAyODBweDsgcGFkZGluZzogMTVweDsgfQogICAgICAgICAgICAuY29uZmlnLXRpdGxlIHsgZm9udC1zaXplOiAyMHB4OyB9CiAgICAgICAgICAgIC53aGF0c2FwcC1saW5rIHsgcGFkZGluZzogOHB4IDE0cHg7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHsKICAgICAgICAgICAgLmNvbmZpZy1wYW5lbCB7IHdpZHRoOiAxMDAlOyBsZWZ0OiAtMTAwJTsgfQogICAgICAgICAgICAuY29uZmlnLXBhbmVsLm9wZW4geyBsZWZ0OiAwOyB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxjYW52YXMgY2xhc3M9IndlYmdsIj48L2NhbnZhcz4KICAgIDxkaXYgY2xhc3M9Imluc3RydWN0aW9ucyI+VGUgQW1vIE11Y2hvdGU8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImNyZWRpdHMiPkJ5IE1SPC9kaXY+CiAgICAKICAgIDwhLS0gTWVuw7ogZGUgY29uZmlndXJhY2nDs24gLS0+CiAgICA8ZGl2IGNsYXNzPSJtZW51LWJ1dHRvbiIgaWQ9Im1lbnVCdXR0b24iPgogICAgICAgIDxzcGFuPjwvc3Bhbj4KICAgICAgICA8c3Bhbj48L3NwYW4+CiAgICAgICAgPHNwYW4+PC9zcGFuPgogICAgPC9kaXY+CiAgICAKICAgIDxkaXYgY2xhc3M9Im92ZXJsYXkiIGlkPSJvdmVybGF5Ij48L2Rpdj4KICAgIAogICAgPGRpdiBjbGFzcz0iY29uZmlnLXBhbmVsIiBpZD0iY29uZmlnUGFuZWwiPgogICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1oZWFkZXIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctdGl0bGUiPkNvbmZpZ3VyYWNpw7NuPC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNsb3NlLWJ1dHRvbiIgaWQ9ImNsb3NlQnV0dG9uIj7inJU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctc2VjdGlvbiI+CiAgICAgICAgICAgIDxoMz5Db3Jhem9uZXMgT3JiaXRhbGVzPC9oMz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29uZmlnLW9wdGlvbiI+CiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJoZWFydFNpemUiPlRhbWHDsW88L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBpZD0iaGVhcnRTaXplIiBtaW49IjAuMyIgbWF4PSIxLjIiIHN0ZXA9IjAuMSIgdmFsdWU9IjAuOCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctb3B0aW9uIj4KICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImhlYXJ0U3BlZWQiPlZlbG9jaWRhZCBkZSByb3RhY2nDs248L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBpZD0iaGVhcnRTcGVlZCIgbWluPSIwIiBtYXg9IjEiIHN0ZXA9IjAuMDUiIHZhbHVlPSIwLjI1Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1vcHRpb24iPgogICAgICAgICAgICAgICAgPGxhYmVsPkNvbG9yIHByaW5jaXBhbDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1vcHRpb25zIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1vcHRpb24gYWN0aXZlIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI0ZGRDcwMDsiIGRhdGEtY29sb3I9IiNGRkQ3MDAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLW9wdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNDN0I4RUE7IiBkYXRhLWNvbG9yPSIjQzdCOEVBIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1vcHRpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjODAwMDgwOyIgZGF0YS1jb2xvcj0iIzgwMDA4MCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3Itb3B0aW9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzA5NDlmMDsiIGRhdGEtY29sb3I9IiMwOTQ5ZjAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLW9wdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICM4YTJiZTI7IiBkYXRhLWNvbG9yPSIjOGEyYmUyIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1vcHRpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMDFmZmZmOyIgZGF0YS1jb2xvcj0iIzAxZmZmZiI+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iY29uZmlnLXNlY3Rpb24iPgogICAgICAgICAgICA8aDM+Q29yYXrDs24gQ2VudHJhbDwvaDM+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1vcHRpb24iPgogICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iY2VudGVySGVhcnRTaXplIj5UYW1hw7FvPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9ImNlbnRlckhlYXJ0U2l6ZSIgbWluPSIyLjAiIG1heD0iNS4wIiBzdGVwPSIwLjIiIHZhbHVlPSIzLjIiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctc2VjdGlvbiI+CiAgICAgICAgICAgIDxoMz5Gb25kbyBFc3RlbGFyPC9oMz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29uZmlnLW9wdGlvbiI+CiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzdGFyQnJpZ2h0bmVzcyI+QnJpbGxvIGRlIGVzdHJlbGxhczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJzdGFyQnJpZ2h0bmVzcyIgbWluPSIwLjMiIG1heD0iMS4wIiBzdGVwPSIwLjEiIHZhbHVlPSIwLjg1Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1zZWN0aW9uIj4KICAgICAgICAgICAgPGgzPk9wY2lvbmVzIEF2YW56YWRhczwvaDM+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1vcHRpb24iPgogICAgICAgICAgICAgICAgPGxhYmVsPlJvdGFjacOzbiBhdXRvbcOhdGljYTwvbGFiZWw+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InRvZ2dsZS1zd2l0Y2giPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImF1dG9Sb3RhdGVUb2dnbGUiIGNoZWNrZWQ+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNsaWRlciI+PC9zcGFuPgogICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1vcHRpb24iPgogICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0idGV4dE9wYWNpdHkiPk9wYWNpZGFkIGRlIHRleHRvcyByb23DoW50aWNvczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJ0ZXh0T3BhY2l0eSIgbWluPSIwLjEiIG1heD0iMS4wIiBzdGVwPSIwLjEiIHZhbHVlPSIwLjkiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJkZXZlbG9wZXItaW5mbyI+CiAgICAgICAgICAgIDxoMz5NUjwvaDM+CiAgICAgICAgICAgIDxwPlRlIEFtbyBNdWNob3RlIE1pIE5pw7FhIEhlcm1vc2E8L3A+CiAgICAgICAgICAgIAogICAgICAgICAgICA8L2E+CiAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW4tdG9wOiAxMnB4OyBmb250LXNpemU6IDEycHg7IGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNik7Ij4KICAgICAgICAgICAgICAgQW5kCiAgICAgICAgICAgIDwvcD4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQgdHlwZT0ibW9kdWxlIj4KICAgICAgICBpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICJodHRwczovL2Nkbi5za3lwYWNrLmRldi90aHJlZUAwLjEzMi4yIjsKICAgICAgICBpbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAiaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvdGhyZWVAMC4xMzIuMi9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scy5qcyI7CgogICAgICAgIC8vIENyZWF0ZSBmbG9hdGluZyBDU1MgaGVhcnRzCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ1NTSGVhcnRzKCkgewogICAgICAgICAgICBjb25zdCBoZWFydFN5bWJvbHMgPSAnLCAn8J+RuCcsICfwn4y3JywgJ/CfkpwnLCAn4p2k77iP4oCN8J+UpScnLCAn8J+YmCcsICfinYcnLCAn8J+SliddOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5ib2R5OwogICAgICAgICAgICBjb25zdCBoZWFydENvdW50ID0gMzA7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVhcnRDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBoZWFydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgaGVhcnQuY2xhc3NOYW1lID0gJ2hlYXJ0JzsKICAgICAgICAgICAgICAgIGhlYXJ0LnRleHRDb250ZW50ID0gaGVhcnRTeW1ib2xzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGhlYXJ0U3ltYm9scy5sZW5ndGgpXTsKICAgICAgICAgICAgICAgIGhlYXJ0LnN0eWxlLmxlZnQgPSBgJHtNYXRoLnJhbmRvbSgpICogMTAwfSVgOwogICAgICAgICAgICAgICAgaGVhcnQuc3R5bGUudG9wID0gYCR7TWF0aC5yYW5kb20oKSAqIDEwMH0lYDsKICAgICAgICAgICAgICAgIGhlYXJ0LnN0eWxlLmZvbnRTaXplID0gYCR7MTYgKyBNYXRoLnJhbmRvbSgpICogMjB9cHhgOwogICAgICAgICAgICAgICAgaGVhcnQuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBgJHtNYXRoLnJhbmRvbSgpICogMTV9c2A7CiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhcnQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNyZWF0ZUNTU0hlYXJ0cygpOwoKICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMud2ViZ2wnKTsKICAgICAgICBjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpOwoKICAgICAgICBjb25zdCByb21hbnRpY1BocmFzZXMgPSBbCiAgICAgICAgICAgICLwn5KWIFRlIGFtbyDwn5KWIiwgIvCfjLkgTWkgYW1vciDwn4y5IiwgIiBNaSByZXluYSAiLCAi8J+SnCBBbmQg8J+SnCIsICLwn4yMIEVyZXMgdG9kbyDwn4yMIiwKICAgICAgICAgICAgIvCfkqsgUGFyYSBzaWVtcHJlIPCfkqsiLCAi8J+MnyBNaSB2aWRhIPCfjJ8iLCAi4piA77iPIE1pIGNpZWxvIOKYgO+4jyIsICLwn4yFIE1pIHNvbCDwn4yFIiwgIvCfjLggbGluZGEgIPCfjLgiLAogICAgICAgICAgICAi8J+MuiBIZXJtb3NhIPCfjLoiLCAi8J+MtyBQcmVjaW9zYSDwn4y3IiwgIvCfkpUgZGl2aW5hIPCfkpUiLCAi8J+klyBiZWJlICDwn6SXIiwgIvCfkp0gQW1vciBtw61vIPCfkp0iLAogICAgICAgICAgICAi8J+RuCBNaSBwcmluY2VzYSDwn5G4IiwgIvCfkbwgTWkgw6FuZ2VsIPCfkbwiLCAi4q2QIE1pIGVzdHJlbGxhIOKtkCIsICLwn4yNIE1pIG11bmRvIPCfjI0iLCAi8J+SjiBFcmVzIMO6bmljYSDwn5KOIiwKICAgICAgICAgICAgIvCfmI0gVGUgYWRvcm8g8J+YjSIsICLwn46BIE1pIHRlc29ybyDwn46BIiwgIvCfmIogTWkgZmVsaWNpZGFkIPCfmIoiLAogICAgICAgICAgICAi8J+Viu+4jyBNaSBwYXog8J+Viu+4jyIsICLwn46JIE1pIGFsZWdyw61hIPCfjokiLCAi4pm+77iPIFBvciBzaWVtcHJlIOKZvu+4jyIsICLwn5KNIEFtb3IgZGUgbWkgdmlkYSDwn5KNIgogICAgICAgIF07CgogICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7CiAgICAgICAgICAgIGhlYXJ0Q291bnQ6IDE2LAogICAgICAgICAgICBwYXJ0aWNsZXNQZXJIZWFydDogMTAwMCwKICAgICAgICAgICAgaGVhcnRTaXplOiAwLjgsCiAgICAgICAgICAgIGhlYXJ0U2l6ZVZhcmlhdGlvbjogMC4yLAogICAgICAgICAgICBpbnNpZGVDb2xvcjogJyNmZjAwNTUnLAogICAgICAgICAgICBvdXRzaWRlQ29sb3I6ICcjZmYzMDg4JywKICAgICAgICAgICAgY2VudGVySGVhcnRTaXplOiAzLjIsCiAgICAgICAgICAgIGNlbnRlckhlYXJ0UGFydGljbGVzOiAzMDAwLAogICAgICAgICAgICBudWNsZXVzUGFydGljbGVzOiA4MDAsCiAgICAgICAgICAgIGhlYXJ0Q29yZVBhcnRpY2xlczogMTAwLAogICAgICAgICAgICBhdXRvUm90YXRlU3BlZWQ6IDAuMjUsCiAgICAgICAgICAgIHN0YXJPcGFjaXR5OiAwLjg1LAogICAgICAgICAgICB0ZXh0T3BhY2l0eTogMC45LAogICAgICAgICAgICBhdXRvUm90YXRlOiB0cnVlCiAgICAgICAgfTsKCiAgICAgICAgbGV0IHRleHRTcHJpdGVzID0gW107CiAgICAgICAgbGV0IGhlYXJ0U3RydWN0dXJlcyA9IFtdOwogICAgICAgIGxldCBjZW50ZXJIZWFydCA9IG51bGw7CiAgICAgICAgbGV0IG51Y2xldXNQYXJ0aWNsZXMgPSBudWxsOwogICAgICAgIGxldCBzdGFyZmllbGQgPSBudWxsOwogICAgICAgIGxldCBoZWFydENvcmVTeXN0ZW1zID0gW107CiAgICAgICAgbGV0IGhlYXJ0VGV4dHMgPSBbXTsKCiAgICAgICAgY29uc3QgY3JlYXRlVGV4dFNwcml0ZSA9ICh0ZXh0KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDMyMDsKICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IDgwOwogICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICBjb250ZXh0LmZvbnQgPSAnQm9sZCAzMnB4IEdlb3JnaWEnOwogICAgICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnOwogICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IGNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTsKICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIHBhcmFtZXRlcnMuaW5zaWRlQ29sb3IpOwogICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMC41LCAnI2ZmZmZmZicpOwogICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgcGFyYW1ldGVycy5vdXRzaWRlQ29sb3IpOwogICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50OwogICAgICAgICAgICBjb250ZXh0LnNoYWRvd0NvbG9yID0gJyNmZmZmZmYnOwogICAgICAgICAgICBjb250ZXh0LnNoYWRvd0JsdXIgPSAxNTsKICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dCh0ZXh0LCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMik7CiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVEhSRUUuQ2FudmFzVGV4dHVyZShjYW52YXMpOwogICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbCh7IAogICAgICAgICAgICAgICAgbWFwOiB0ZXh0dXJlLAogICAgICAgICAgICAgICAgY29sb3I6IDB4ZmZmZmZmLAogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsCiAgICAgICAgICAgICAgICBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZywKICAgICAgICAgICAgICAgIGRlcHRoV3JpdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgb3BhY2l0eTogcGFyYW1ldGVycy50ZXh0T3BhY2l0eQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gbmV3IFRIUkVFLlNwcml0ZShtYXRlcmlhbCk7CiAgICAgICAgICAgIHNwcml0ZS5zY2FsZS5zZXQoMC41NSwgMC4xNCwgMSk7CiAgICAgICAgICAgIHJldHVybiBzcHJpdGU7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgY3JlYXRlQ2VudGVySGVhcnRUZXh0ID0gKCkgPT4gewogICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICBjYW52YXMud2lkdGggPSA1MTI7CiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSAxMjg7CiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIGNvbnRleHQuZm9udCA9ICdCb2xkIDYwcHggUGFjaWZpY28nOwogICAgICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnOwogICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IGNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTsKICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICcjZmY2MDMwJyk7CiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsICcjZmZmZmZmJyk7CiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAnIzA5NDlmMCcpOwogICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50OwogICAgICAgICAgICBjb250ZXh0LnNoYWRvd0NvbG9yID0gJyNmZmZmZmYnOwogICAgICAgICAgICBjb250ZXh0LnNoYWRvd0JsdXIgPSAyNTsKICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dCgi8J+Slm5hcmVsYfCfkpYKICAgICAgICAgICAgIiwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIpOwogICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gbmV3IFRIUkVFLkNhbnZhc1RleHR1cmUoY2FudmFzKTsKICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuU3ByaXRlTWF0ZXJpYWwoeyAKICAgICAgICAgICAgICAgIG1hcDogdGV4dHVyZSwKICAgICAgICAgICAgICAgIGNvbG9yOiAweGZmZmZmZiwKICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsCiAgICAgICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gbmV3IFRIUkVFLlNwcml0ZShtYXRlcmlhbCk7CiAgICAgICAgICAgIHNwcml0ZS5zY2FsZS5zZXQoMi4wLCAwLjUsIDEpOwogICAgICAgICAgICByZXR1cm4gc3ByaXRlOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGNyZWF0ZUhlYXJ0VGV4dCA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgY2FudmFzLndpZHRoID0gMjU2OwogICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gNjQ7CiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIGNvbnRleHQuZm9udCA9ICdCb2xkIDI0cHggUGFjaWZpY28nOwogICAgICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnOwogICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IGNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTsKICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICcjZmY2MDMwJyk7CiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsICcjZmZmZmZmJyk7CiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAnIzA5NDlmMCcpOwogICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50OwogICAgICAgICAgICBjb250ZXh0LnNoYWRvd0NvbG9yID0gJyNmZmZmZmYnOwogICAgICAgICAgICBjb250ZXh0LnNoYWRvd0JsdXIgPSAxMjsKICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dCgi8J+YjW1pIGJlYmXwn5iNIiwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIpOwogICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gbmV3IFRIUkVFLkNhbnZhc1RleHR1cmUoY2FudmFzKTsKICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuU3ByaXRlTWF0ZXJpYWwoeyAKICAgICAgICAgICAgICAgIG1hcDogdGV4dHVyZSwKICAgICAgICAgICAgICAgIGNvbG9yOiAweGZmZmZmZiwKICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsCiAgICAgICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gbmV3IFRIUkVFLlNwcml0ZShtYXRlcmlhbCk7CiAgICAgICAgICAgIHNwcml0ZS5zY2FsZS5zZXQoMC43LCAwLjE3LCAxKTsKICAgICAgICAgICAgcmV0dXJuIHNwcml0ZTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBjcmVhdGVJbnZlcnRlZEhlYXJ0R2VvbWV0cnkgPSAoc2l6ZSA9IDEuMCwgcGFydGljbGVDb3VudCA9IDE1MDApID0+IHsKICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShwYXJ0aWNsZUNvdW50ICogMyk7CiAgICAgICAgICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkocGFydGljbGVDb3VudCAqIDMpOwogICAgICAgICAgICBjb25zdCBjb2xvckluc2lkZSA9IG5ldyBUSFJFRS5Db2xvcihwYXJhbWV0ZXJzLmluc2lkZUNvbG9yKTsKICAgICAgICAgICAgY29uc3QgY29sb3JPdXRzaWRlID0gbmV3IFRIUkVFLkNvbG9yKHBhcmFtZXRlcnMub3V0c2lkZUNvbG9yKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNsZUNvdW50OyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyOwogICAgICAgICAgICAgICAgY29uc3QgeCA9IDE2ICogTWF0aC5wb3coTWF0aC5zaW4odCksIDMpOwogICAgICAgICAgICAgICAgY29uc3QgeSA9IDEzICogTWF0aC5jb3ModCkgLSA1ICogTWF0aC5jb3MoMip0KSAtIDIgKiBNYXRoLmNvcygzKnQpIC0gTWF0aC5jb3MoNCp0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHogPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAzOwogICAgICAgICAgICAgICAgcG9zaXRpb25zW2kzXSA9ICh4ICogc2l6ZSAqIDAuMDQpICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogc2l6ZSAqIDAuMDg7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaTMgKyAxXSA9ICh5ICogc2l6ZSAqIDAuMDQpICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogc2l6ZSAqIDAuMDg7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaTMgKyAyXSA9IHogKiBzaXplICogMC4wODsKICAgICAgICAgICAgICAgIGNvbnN0IHJhZGl1cyA9IE1hdGguc3FydCh4KnggKyB5KnkpOwogICAgICAgICAgICAgICAgY29uc3QgbWF4UmFkaXVzID0gMjA7CiAgICAgICAgICAgICAgICBjb25zdCBtaXhlZENvbG9yID0gY29sb3JJbnNpZGUuY2xvbmUoKTsKICAgICAgICAgICAgICAgIG1peGVkQ29sb3IubGVycChjb2xvck91dHNpZGUsIE1hdGgubWluKHJhZGl1cyAvIG1heFJhZGl1cywgMSkpOwogICAgICAgICAgICAgICAgbWl4ZWRDb2xvci5vZmZzZXRIU0woMCwgMC41LCAwKTsKICAgICAgICAgICAgICAgIGNvbG9yc1tpM10gPSBtaXhlZENvbG9yLnI7CiAgICAgICAgICAgICAgICBjb2xvcnNbaTMgKyAxXSA9IG1peGVkQ29sb3IuZzsKICAgICAgICAgICAgICAgIGNvbG9yc1tpMyArIDJdID0gbWl4ZWRDb2xvci5iOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7CiAgICAgICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9ucywgMykpOwogICAgICAgICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShjb2xvcnMsIDMpKTsKICAgICAgICAgICAgcmV0dXJuIGdlb21ldHJ5OwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGNyZWF0ZVN0YXJmaWVsZCA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3Qgc3RhckNvdW50ID0gNjAwMDsKICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShzdGFyQ291bnQgKiAzKTsKICAgICAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IEZsb2F0MzJBcnJheShzdGFyQ291bnQgKiAzKTsKICAgICAgICAgICAgY29uc3Qgc2l6ZXMgPSBuZXcgRmxvYXQzMkFycmF5KHN0YXJDb3VudCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhckNvdW50OyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgICAgICAgICBjb25zdCByYWRpdXMgPSA1MCArIE1hdGgucmFuZG9tKCkgKiAxNTA7CiAgICAgICAgICAgICAgICBjb25zdCB0aGV0YSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjsKICAgICAgICAgICAgICAgIGNvbnN0IHBoaSA9IE1hdGguYWNvcygyICogTWF0aC5yYW5kb20oKSAtIDEpOwogICAgICAgICAgICAgICAgcG9zaXRpb25zW2kzXSA9IHJhZGl1cyAqIE1hdGguc2luKHBoaSkgKiBNYXRoLmNvcyh0aGV0YSk7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaTMgKyAxXSA9IHJhZGl1cyAqIE1hdGguc2luKHBoaSkgKiBNYXRoLnNpbih0aGV0YSk7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaTMgKyAyXSA9IHJhZGl1cyAqIE1hdGguY29zKHBoaSk7CiAgICAgICAgICAgICAgICBjb25zdCBjb2xvclR5cGUgPSBNYXRoLnJhbmRvbSgpOwogICAgICAgICAgICAgICAgaWYgKGNvbG9yVHlwZSA8IDAuNykgewogICAgICAgICAgICAgICAgICAgIGNvbG9yc1tpM10gPSAxOwogICAgICAgICAgICAgICAgICAgIGNvbG9yc1tpMyArIDFdID0gMTsKICAgICAgICAgICAgICAgICAgICBjb2xvcnNbaTMgKyAyXSA9IDE7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbG9yVHlwZSA8IDAuODUpIHsKICAgICAgICAgICAgICAgICAgICBjb2xvcnNbaTNdID0gMC43OwogICAgICAgICAgICAgICAgICAgIGNvbG9yc1tpMyArIDFdID0gMC44OwogICAgICAgICAgICAgICAgICAgIGNvbG9yc1tpMyArIDJdID0gMTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29sb3JzW2kzXSA9IDE7CiAgICAgICAgICAgICAgICAgICAgY29sb3JzW2kzICsgMV0gPSAwLjk7CiAgICAgICAgICAgICAgICAgICAgY29sb3JzW2kzICsgMl0gPSAwLjc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzaXplc1tpXSA9IDAuMiArIE1hdGgucmFuZG9tKCkgKiAwLjQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTsKICAgICAgICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb25zLCAzKSk7CiAgICAgICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnY29sb3InLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGNvbG9ycywgMykpOwogICAgICAgICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3NpemUnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHNpemVzLCAxKSk7CiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKHsKICAgICAgICAgICAgICAgIHNpemU6IDAuOCwKICAgICAgICAgICAgICAgIHNpemVBdHRlbnVhdGlvbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHZlcnRleENvbG9yczogdHJ1ZSwKICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgb3BhY2l0eTogcGFyYW1ldGVycy5zdGFyT3BhY2l0eSwKICAgICAgICAgICAgICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLAogICAgICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHN0YXJzID0gbmV3IFRIUkVFLlBvaW50cyhnZW9tZXRyeSwgbWF0ZXJpYWwpOwogICAgICAgICAgICByZXR1cm4gc3RhcnM7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgY3JlYXRlTnVjbGV1c1BhcnRpY2xlcyA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgcGFydGljbGVDb3VudCA9IHBhcmFtZXRlcnMubnVjbGV1c1BhcnRpY2xlczsKICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShwYXJ0aWNsZUNvdW50ICogMyk7CiAgICAgICAgICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkocGFydGljbGVDb3VudCAqIDMpOwogICAgICAgICAgICBjb25zdCBzaXplcyA9IG5ldyBGbG9hdDMyQXJyYXkocGFydGljbGVDb3VudCk7CiAgICAgICAgICAgIGNvbnN0IGNvbG9yMSA9IG5ldyBUSFJFRS5Db2xvcigweGZmNjAzMCk7CiAgICAgICAgICAgIGNvbnN0IGNvbG9yMiA9IG5ldyBUSFJFRS5Db2xvcigweDA5NDlmMCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gTWF0aC5yYW5kb20oKSAqIDAuODsKICAgICAgICAgICAgICAgIGNvbnN0IHRoZXRhID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyOwogICAgICAgICAgICAgICAgY29uc3QgcGhpID0gTWF0aC5hY29zKDIgKiBNYXRoLnJhbmRvbSgpIC0gMSk7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaTNdID0gcmFkaXVzICogTWF0aC5zaW4ocGhpKSAqIE1hdGguY29zKHRoZXRhKTsKICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpMyArIDFdID0gcmFkaXVzICogTWF0aC5zaW4ocGhpKSAqIE1hdGguc2luKHRoZXRhKTsKICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpMyArIDJdID0gcmFkaXVzICogTWF0aC5jb3MocGhpKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1peGVkQ29sb3IgPSBjb2xvcjEuY2xvbmUoKTsKICAgICAgICAgICAgICAgIG1peGVkQ29sb3IubGVycChjb2xvcjIsIE1hdGgucmFuZG9tKCkpOwogICAgICAgICAgICAgICAgY29sb3JzW2kzXSA9IG1peGVkQ29sb3IucjsKICAgICAgICAgICAgICAgIGNvbG9yc1tpMyArIDFdID0gbWl4ZWRDb2xvci5nOwogICAgICAgICAgICAgICAgY29sb3JzW2kzICsgMl0gPSBtaXhlZENvbG9yLmI7CiAgICAgICAgICAgICAgICBzaXplc1tpXSA9IDAuMDIgKyBNYXRoLnJhbmRvbSgpICogMC4wMzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpOwogICAgICAgICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsIDMpKTsKICAgICAgICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdjb2xvcicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoY29sb3JzLCAzKSk7CiAgICAgICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnc2l6ZScsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoc2l6ZXMsIDEpKTsKICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoewogICAgICAgICAgICAgICAgc2l6ZTogMC4wMywKICAgICAgICAgICAgICAgIHNpemVBdHRlbnVhdGlvbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHZlcnRleENvbG9yczogdHJ1ZSwKICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgb3BhY2l0eTogMC44NSwKICAgICAgICAgICAgICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLAogICAgICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHBhcnRpY2xlcyA9IG5ldyBUSFJFRS5Qb2ludHMoZ2VvbWV0cnksIG1hdGVyaWFsKTsKICAgICAgICAgICAgcmV0dXJuIHBhcnRpY2xlczsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBjcmVhdGVIZWFydENvcmVQYXJ0aWNsZXMgPSAocG9zaXRpb24pID0+IHsKICAgICAgICAgICAgY29uc3QgcGFydGljbGVDb3VudCA9IHBhcmFtZXRlcnMuaGVhcnRDb3JlUGFydGljbGVzOwogICAgICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KHBhcnRpY2xlQ291bnQgKiAzKTsKICAgICAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IEZsb2F0MzJBcnJheShwYXJ0aWNsZUNvdW50ICogMyk7CiAgICAgICAgICAgIGNvbnN0IHNpemVzID0gbmV3IEZsb2F0MzJBcnJheShwYXJ0aWNsZUNvdW50KTsKICAgICAgICAgICAgY29uc3QgYmFzZUNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKAogICAgICAgICAgICAgICAgMC41ICsgTWF0aC5yYW5kb20oKSAqIDAuNSwKICAgICAgICAgICAgICAgIDAuNSArIE1hdGgucmFuZG9tKCkgKiAwLjUsCiAgICAgICAgICAgICAgICAwLjUgKyBNYXRoLnJhbmRvbSgpICogMC41CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbnN0IGFjY2VudENvbG9yID0gbmV3IFRIUkVFLkNvbG9yKAogICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSwKICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCksCiAgICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gTWF0aC5yYW5kb20oKSAqIDAuMzsKICAgICAgICAgICAgICAgIGNvbnN0IHRoZXRhID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyOwogICAgICAgICAgICAgICAgY29uc3QgcGhpID0gTWF0aC5hY29zKDIgKiBNYXRoLnJhbmRvbSgpIC0gMSk7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaTNdID0gcmFkaXVzICogTWF0aC5zaW4ocGhpKSAqIE1hdGguY29zKHRoZXRhKTsKICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpMyArIDFdID0gcmFkaXVzICogTWF0aC5zaW4ocGhpKSAqIE1hdGguc2luKHRoZXRhKTsKICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpMyArIDJdID0gcmFkaXVzICogTWF0aC5jb3MocGhpKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1peGVkQ29sb3IgPSBiYXNlQ29sb3IuY2xvbmUoKTsKICAgICAgICAgICAgICAgIG1peGVkQ29sb3IubGVycChhY2NlbnRDb2xvciwgTWF0aC5yYW5kb20oKSk7CiAgICAgICAgICAgICAgICBjb2xvcnNbaTNdID0gbWl4ZWRDb2xvci5yOwogICAgICAgICAgICAgICAgY29sb3JzW2kzICsgMV0gPSBtaXhlZENvbG9yLmc7CiAgICAgICAgICAgICAgICBjb2xvcnNbaTMgKyAyXSA9IG1peGVkQ29sb3IuYjsKICAgICAgICAgICAgICAgIHNpemVzW2ldID0gMC4wMTUgKyBNYXRoLnJhbmRvbSgpICogMC4wMjsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpOwogICAgICAgICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsIDMpKTsKICAgICAgICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdjb2xvcicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoY29sb3JzLCAzKSk7CiAgICAgICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnc2l6ZScsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoc2l6ZXMsIDEpKTsKICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoewogICAgICAgICAgICAgICAgc2l6ZTogMC4wMiwKICAgICAgICAgICAgICAgIHNpemVBdHRlbnVhdGlvbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHZlcnRleENvbG9yczogdHJ1ZSwKICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgb3BhY2l0eTogMC45LAogICAgICAgICAgICAgICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsCiAgICAgICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgcGFydGljbGVzID0gbmV3IFRIUkVFLlBvaW50cyhnZW9tZXRyeSwgbWF0ZXJpYWwpOwogICAgICAgICAgICBwYXJ0aWNsZXMucG9zaXRpb24uY29weShwb3NpdGlvbik7CiAgICAgICAgICAgIHJldHVybiBwYXJ0aWNsZXM7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgZ2VuZXJhdGVIZWFydHMgPSAoKSA9PiB7CiAgICAgICAgICAgIHRleHRTcHJpdGVzLmZvckVhY2goc3ByaXRlID0+IHNjZW5lLnJlbW92ZShzcHJpdGUpKTsKICAgICAgICAgICAgdGV4dFNwcml0ZXMgPSBbXTsKICAgICAgICAgICAgaGVhcnRUZXh0cy5mb3JFYWNoKHRleHQgPT4gc2NlbmUucmVtb3ZlKHRleHQpKTsKICAgICAgICAgICAgaGVhcnRUZXh0cyA9IFtdOwogICAgICAgICAgICBoZWFydFN0cnVjdHVyZXMuZm9yRWFjaChoZWFydCA9PiB7CiAgICAgICAgICAgICAgICBoZWFydC5nZW9tZXRyeS5kaXNwb3NlKCk7CiAgICAgICAgICAgICAgICBoZWFydC5tYXRlcmlhbC5kaXNwb3NlKCk7CiAgICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUoaGVhcnQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaGVhcnRTdHJ1Y3R1cmVzID0gW107CiAgICAgICAgICAgIGhlYXJ0Q29yZVN5c3RlbXMuZm9yRWFjaChjb3JlID0+IHsKICAgICAgICAgICAgICAgIGNvcmUuZ2VvbWV0cnkuZGlzcG9zZSgpOwogICAgICAgICAgICAgICAgY29yZS5tYXRlcmlhbC5kaXNwb3NlKCk7CiAgICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUoY29yZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBoZWFydENvcmVTeXN0ZW1zID0gW107CiAgICAgICAgICAgIGlmIChjZW50ZXJIZWFydCkgewogICAgICAgICAgICAgICAgY2VudGVySGVhcnQuZ2VvbWV0cnkuZGlzcG9zZSgpOwogICAgICAgICAgICAgICAgY2VudGVySGVhcnQubWF0ZXJpYWwuZGlzcG9zZSgpOwogICAgICAgICAgICAgICAgc2NlbmUucmVtb3ZlKGNlbnRlckhlYXJ0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobnVjbGV1c1BhcnRpY2xlcykgewogICAgICAgICAgICAgICAgbnVjbGV1c1BhcnRpY2xlcy5nZW9tZXRyeS5kaXNwb3NlKCk7CiAgICAgICAgICAgICAgICBudWNsZXVzUGFydGljbGVzLm1hdGVyaWFsLmRpc3Bvc2UoKTsKICAgICAgICAgICAgICAgIHNjZW5lLnJlbW92ZShudWNsZXVzUGFydGljbGVzKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbWV0ZXJzLmhlYXJ0Q291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgaGVhcnRTaXplID0gcGFyYW1ldGVycy5oZWFydFNpemUgKyBNYXRoLnJhbmRvbSgpICogcGFyYW1ldGVycy5oZWFydFNpemVWYXJpYXRpb247CiAgICAgICAgICAgICAgICBjb25zdCBoZWFydEdlb21ldHJ5ID0gY3JlYXRlSW52ZXJ0ZWRIZWFydEdlb21ldHJ5KGhlYXJ0U2l6ZSwgcGFyYW1ldGVycy5wYXJ0aWNsZXNQZXJIZWFydCk7CiAgICAgICAgICAgICAgICBjb25zdCBoZWFydE1hdGVyaWFsID0gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKHsKICAgICAgICAgICAgICAgICAgICBzaXplOiAwLjAyNSwKICAgICAgICAgICAgICAgICAgICBzaXplQXR0ZW51YXRpb246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsCiAgICAgICAgICAgICAgICAgICAgdmVydGV4Q29sb3JzOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuOTgKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc3QgaGVhcnQgPSBuZXcgVEhSRUUuUG9pbnRzKGhlYXJ0R2VvbWV0cnksIGhlYXJ0TWF0ZXJpYWwpOwogICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gMy44OwogICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAvIHBhcmFtZXRlcnMuaGVhcnRDb3VudCkgKiBNYXRoLlBJICogMjsKICAgICAgICAgICAgICAgIGhlYXJ0LnBvc2l0aW9uLnNldCgKICAgICAgICAgICAgICAgICAgICBNYXRoLmNvcyhhbmdsZSkgKiByYWRpdXMsCiAgICAgICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbihhbmdsZSkgKiByYWRpdXMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBzY2VuZS5hZGQoaGVhcnQpOwogICAgICAgICAgICAgICAgaGVhcnRTdHJ1Y3R1cmVzLnB1c2goaGVhcnQpOwogICAgICAgICAgICAgICAgY29uc3QgY29yZVBhcnRpY2xlcyA9IGNyZWF0ZUhlYXJ0Q29yZVBhcnRpY2xlcyhoZWFydC5wb3NpdGlvbik7CiAgICAgICAgICAgICAgICBzY2VuZS5hZGQoY29yZVBhcnRpY2xlcyk7CiAgICAgICAgICAgICAgICBoZWFydENvcmVTeXN0ZW1zLnB1c2goY29yZVBhcnRpY2xlcyk7CiAgICAgICAgICAgICAgICBjb25zdCBoZWFydFRleHQgPSBjcmVhdGVIZWFydFRleHQoKTsKICAgICAgICAgICAgICAgIGhlYXJ0VGV4dC5wb3NpdGlvbi5jb3B5KGhlYXJ0LnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgIHNjZW5lLmFkZChoZWFydFRleHQpOwogICAgICAgICAgICAgICAgaGVhcnRUZXh0cy5wdXNoKGhlYXJ0VGV4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGNlbnRlckhlYXJ0R2VvbWV0cnkgPSBjcmVhdGVJbnZlcnRlZEhlYXJ0R2VvbWV0cnkocGFyYW1ldGVycy5jZW50ZXJIZWFydFNpemUsIHBhcmFtZXRlcnMuY2VudGVySGVhcnRQYXJ0aWNsZXMpOwogICAgICAgICAgICBjb25zdCBjZW50ZXJIZWFydE1hdGVyaWFsID0gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKHsKICAgICAgICAgICAgICAgIHNpemU6IDAuMDMyLAogICAgICAgICAgICAgICAgc2l6ZUF0dGVudWF0aW9uOiB0cnVlLAogICAgICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsCiAgICAgICAgICAgICAgICBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZywKICAgICAgICAgICAgICAgIHZlcnRleENvbG9yczogdHJ1ZSwKICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgb3BhY2l0eTogMC45OQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2VudGVySGVhcnQgPSBuZXcgVEhSRUUuUG9pbnRzKGNlbnRlckhlYXJ0R2VvbWV0cnksIGNlbnRlckhlYXJ0TWF0ZXJpYWwpOwogICAgICAgICAgICBjZW50ZXJIZWFydC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7CiAgICAgICAgICAgIHNjZW5lLmFkZChjZW50ZXJIZWFydCk7CgogICAgICAgICAgICBudWNsZXVzUGFydGljbGVzID0gY3JlYXRlTnVjbGV1c1BhcnRpY2xlcygpOwogICAgICAgICAgICBzY2VuZS5hZGQobnVjbGV1c1BhcnRpY2xlcyk7CgogICAgICAgICAgICBjb25zdCBjZW50ZXJUZXh0ID0gY3JlYXRlQ2VudGVySGVhcnRUZXh0KCk7CiAgICAgICAgICAgIGNlbnRlclRleHQucG9zaXRpb24uc2V0KDAsIDAuMywgMCk7CiAgICAgICAgICAgIHNjZW5lLmFkZChjZW50ZXJUZXh0KTsKICAgICAgICAgICAgdGV4dFNwcml0ZXMucHVzaChjZW50ZXJUZXh0KTsKCiAgICAgICAgICAgIGNvbnN0IHdvcmRDb3VudCA9IDE2MDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JkQ291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGhyYXNlID0gcm9tYW50aWNQaHJhc2VzW2kgJSByb21hbnRpY1BocmFzZXMubGVuZ3RoXTsKICAgICAgICAgICAgICAgIGNvbnN0IHJhZGl1cyA9IDIuMCArIE1hdGgucmFuZG9tKCkgKiA0LjA7CiAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjsKICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDMuNTsKICAgICAgICAgICAgICAgIGNvbnN0IHNwcml0ZSA9IGNyZWF0ZVRleHRTcHJpdGUocGhyYXNlKTsKICAgICAgICAgICAgICAgIHNwcml0ZS5wb3NpdGlvbi5zZXQoCiAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3MoYW5nbGUpICogcmFkaXVzLAogICAgICAgICAgICAgICAgICAgIGhlaWdodCwKICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbihhbmdsZSkgKiByYWRpdXMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBzY2VuZS5hZGQoc3ByaXRlKTsKICAgICAgICAgICAgICAgIHRleHRTcHJpdGVzLnB1c2goc3ByaXRlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHN0YXJmaWVsZCA9IGNyZWF0ZVN0YXJmaWVsZCgpOwogICAgICAgIHNjZW5lLmFkZChzdGFyZmllbGQpOwogICAgICAgIGdlbmVyYXRlSGVhcnRzKCk7CgogICAgICAgIGNvbnN0IHNpemVzID0gewogICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0CiAgICAgICAgfTsKCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHsKICAgICAgICAgICAgc2l6ZXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgICAgICAgICAgc2l6ZXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICAgICAgICBjYW1lcmEuYXNwZWN0ID0gc2l6ZXMud2lkdGggLyBzaXplcy5oZWlnaHQ7CiAgICAgICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7CiAgICAgICAgICAgIHJlbmRlcmVyLnNldFNpemUoc2l6ZXMud2lkdGgsIHNpemVzLmhlaWdodCk7CiAgICAgICAgICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8oTWF0aC5taW4od2luZG93LmRldmljZVBpeGVsUmF0aW8sIDIpKTsKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDc1LCBzaXplcy53aWR0aCAvIHNpemVzLmhlaWdodCwgMC4xLCAyMDApOwogICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoOSwgNSwgOSk7CiAgICAgICAgc2NlbmUuYWRkKGNhbWVyYSk7CgogICAgICAgIGNvbnN0IGNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoY2FtZXJhLCBjYW52YXMpOwogICAgICAgIGNvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSB0cnVlOwogICAgICAgIGNvbnRyb2xzLmRhbXBpbmdGYWN0b3IgPSAwLjA1OwogICAgICAgIGNvbnRyb2xzLmF1dG9Sb3RhdGUgPSBwYXJhbWV0ZXJzLmF1dG9Sb3RhdGU7CiAgICAgICAgY29udHJvbHMuYXV0b1JvdGF0ZVNwZWVkID0gcGFyYW1ldGVycy5hdXRvUm90YXRlU3BlZWQ7CiAgICAgICAgY29udHJvbHMuZW5hYmxlWm9vbSA9IHRydWU7CiAgICAgICAgY29udHJvbHMuZW5hYmxlUGFuID0gZmFsc2U7CgogICAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoewogICAgICAgICAgICBjYW52YXM6IGNhbnZhcywKICAgICAgICAgICAgYW50aWFsaWFzOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZShzaXplcy53aWR0aCwgc2l6ZXMuaGVpZ2h0KTsKICAgICAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKE1hdGgubWluKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAyKSk7CiAgICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigweDAwMDAwMCwgMSk7CgogICAgICAgIC8vIE1lbsO6IGludGVyYWNjacOzbgogICAgICAgIGNvbnN0IG1lbnVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudUJ1dHRvbicpOwogICAgICAgIGNvbnN0IGNvbmZpZ1BhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ1BhbmVsJyk7CiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VCdXR0b24nKTsKICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXknKTsKCiAgICAgICAgbWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgY29uZmlnUGFuZWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpOwogICAgICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIH0pOwoKICAgICAgICBbY2xvc2VCdXR0b24sIG92ZXJsYXldLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbmZpZ1BhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTsKICAgICAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvLyBDb250cm9sZXMKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhcnRTaXplJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4gewogICAgICAgICAgICBwYXJhbWV0ZXJzLmhlYXJ0U2l6ZSA9IHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICBnZW5lcmF0ZUhlYXJ0cygpOwogICAgICAgIH0pOwoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2VudGVySGVhcnRTaXplJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4gewogICAgICAgICAgICBwYXJhbWV0ZXJzLmNlbnRlckhlYXJ0U2l6ZSA9IHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICBnZW5lcmF0ZUhlYXJ0cygpOwogICAgICAgIH0pOwoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhcnRTcGVlZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHsKICAgICAgICAgICAgcGFyYW1ldGVycy5hdXRvUm90YXRlU3BlZWQgPSBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgY29udHJvbHMuYXV0b1JvdGF0ZVNwZWVkID0gcGFyYW1ldGVycy5hdXRvUm90YXRlU3BlZWQ7CiAgICAgICAgfSk7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFyQnJpZ2h0bmVzcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHsKICAgICAgICAgICAgcGFyYW1ldGVycy5zdGFyT3BhY2l0eSA9IHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICBzdGFyZmllbGQubWF0ZXJpYWwub3BhY2l0eSA9IHBhcmFtZXRlcnMuc3Rhck9wYWNpdHk7CiAgICAgICAgfSk7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0T3BhY2l0eScpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHsKICAgICAgICAgICAgcGFyYW1ldGVycy50ZXh0T3BhY2l0eSA9IHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICB0ZXh0U3ByaXRlcy5mb3JFYWNoKHMgPT4gcy5tYXRlcmlhbC5vcGFjaXR5ID0gcGFyYW1ldGVycy50ZXh0T3BhY2l0eSk7CiAgICAgICAgfSk7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvUm90YXRlVG9nZ2xlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsKICAgICAgICAgICAgcGFyYW1ldGVycy5hdXRvUm90YXRlID0gZS50YXJnZXQuY2hlY2tlZDsKICAgICAgICAgICAgY29udHJvbHMuYXV0b1JvdGF0ZSA9IHBhcmFtZXRlcnMuYXV0b1JvdGF0ZTsKICAgICAgICB9KTsKCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbG9yLW9wdGlvbicpLmZvckVhY2gob3B0aW9uID0+IHsKICAgICAgICAgICAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbG9yLW9wdGlvbicpLmZvckVhY2gob3B0ID0+IG9wdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmluc2lkZUNvbG9yID0gb3B0aW9uLmRhdGFzZXQuY29sb3I7CiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm91dHNpZGVDb2xvciA9IG9wdGlvbi5kYXRhc2V0LmNvbG9yOwogICAgICAgICAgICAgICAgZ2VuZXJhdGVIZWFydHMoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKCk7CiAgICAgICAgY29uc3QgdGljayA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSBjbG9jay5nZXRFbGFwc2VkVGltZSgpOwogICAgICAgICAgICBjb250cm9scy51cGRhdGUoKTsKCiAgICAgICAgICAgIHRleHRTcHJpdGVzLmZvckVhY2goc3ByaXRlID0+IHNwcml0ZS5sb29rQXQoY2FtZXJhLnBvc2l0aW9uKSk7CiAgICAgICAgICAgIGhlYXJ0U3RydWN0dXJlcy5mb3JFYWNoKGhlYXJ0ID0+IGhlYXJ0Lmxvb2tBdChjYW1lcmEucG9zaXRpb24pKTsKICAgICAgICAgICAgaWYgKGNlbnRlckhlYXJ0KSBjZW50ZXJIZWFydC5sb29rQXQoY2FtZXJhLnBvc2l0aW9uKTsKICAgICAgICAgICAgaGVhcnRDb3JlU3lzdGVtcy5mb3JFYWNoKChjb3JlLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGhlYXJ0U3RydWN0dXJlc1tpbmRleF0pIHsKICAgICAgICAgICAgICAgICAgICBjb3JlLnBvc2l0aW9uLmNvcHkoaGVhcnRTdHJ1Y3R1cmVzW2luZGV4XS5wb3NpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgY29yZS5sb29rQXQoY2FtZXJhLnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGhlYXJ0VGV4dHMuZm9yRWFjaCgodGV4dCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChoZWFydFN0cnVjdHVyZXNbaW5kZXhdKSB7CiAgICAgICAgICAgICAgICAgICAgdGV4dC5wb3NpdGlvbi5jb3B5KGhlYXJ0U3RydWN0dXJlc1tpbmRleF0ucG9zaXRpb24pOwogICAgICAgICAgICAgICAgICAgIHRleHQubG9va0F0KGNhbWVyYS5wb3NpdGlvbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAobnVjbGV1c1BhcnRpY2xlcykgbnVjbGV1c1BhcnRpY2xlcy5sb29rQXQoY2FtZXJhLnBvc2l0aW9uKTsKCiAgICAgICAgICAgIGNvbnN0IHN0YXJHZW9tZXRyeSA9IHN0YXJmaWVsZC5nZW9tZXRyeTsKICAgICAgICAgICAgY29uc3Qgc3RhclNpemVzID0gc3Rhckdlb21ldHJ5LmF0dHJpYnV0ZXMuc2l6ZS5hcnJheTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFyU2l6ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IHB1bHNlID0gTWF0aC5zaW4oZWxhcHNlZFRpbWUgKiAwLjUgKyBpICogMC4wMSkgKiAwLjIgKyAwLjg7CiAgICAgICAgICAgICAgICBzdGFyU2l6ZXNbaV0gPSAoMC4yICsgTWF0aC5yYW5kb20oKSAqIDAuNCkgKiBwdWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGFyR2VvbWV0cnkuYXR0cmlidXRlcy5zaXplLm5lZWRzVXBkYXRlID0gdHJ1ZTsKCiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTsKICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTsKICAgICAgICB9OwoKICAgICAgICB0aWNrKCk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+CjwvaGVhZD4KPGJvZHk+CiAgICA8YXVkaW8gaWQ9ImJnLW11c2ljIiBsb29wIGF1dG9wbGF5PgogICAgICAgIDxzb3VyY2Ugc3JjPSJodHRwczovL2dpdGh1Yi5jb20vR29uLXAvRy0vcmF3L3JlZnMvaGVhZHMvbWFpbi9hZG9yZSUyMC0lMjBfZGlkJTIwaSUyMHRlbGwlMjB1JTIwdGhhdCUyMGklMjBtaXNzJTIwdV8lMjAobHlyaWMlMjB2aWRlbykubTRhIiB0eXBlPSJhdWRpby9tcGVnIj4KICAgICAgICBUdSBuYXZlZ2Fkb3Igbm8gc29wb3J0YSBlbCBlbGVtZW50byBkZSBhdWRpby4KICAgIDwvYXVkaW8+CgogICAgPHNjcmlwdD4KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5OwogICAgICAgICAgICBjb25zdCBhdWRpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZy1tdXNpYycpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ29uZmlndXJhciBhdWRpbwogICAgICAgICAgICBhdWRpby52b2x1bWUgPSAwLjQ7CiAgICAgICAgICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChlID0+IGNvbnNvbGUubG9nKCJMYSByZXByb2R1Y2Npw7NuIGF1dG9tw6F0aWNhIG5vIGVzdMOhIHBlcm1pdGlkYSIpKTsKCiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS5sb2coIkF1ZGlvIG5vIHB1ZG8gcmVwcm9kdWNpcnNlIikpOwogICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7CiAgICAgICAgfSk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+CgogICAgUEsBAhQACgAAAAAA2jAwXIJaeRjNlAAAzZQAAAEAAAAAAAAAAAAAAAAAAAAAAExQSwUGAAAAAAEAAQAvAAAA7JQAAAAA