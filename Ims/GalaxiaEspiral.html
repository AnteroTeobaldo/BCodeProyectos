<!DOCTYPE html>
<html>

<head>
  <title>GalaxiaEspiral.html</title>
</head>

<body>

</body>

</html>
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nebulosa Profunda & Estrellas Fugaces Neón</title>
  <style>
    body {
      margin: 0;
      background-color: #000;
      overflow: hidden;
    }

    canvas {
      display: block;
    }

    #ui {
      position: absolute;
      top: 15px;
      left: 15px;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      pointer-events: none;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      letter-spacing: 1px;
      font-size: 14px;
    }
  </style>
</head>

<body>
  <div id="ui">TE AMO MUCHO MI ISMA ♥️|</div>

  <script type="importmap">
    {
                                                                                                                                    "imports": {
                                                                                                                                                    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                                                                                                                                                                    "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
                                                                                                                                                                                }
                                                                                                                                                                                        }
                                                                                                                                                                                            
  </script>

  <script type="module">
    import * as THREE from 'three';
                                                                                                                                                                                                                import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

                                                                                                                                                                                                                        const scene = new THREE.Scene();
                                                                                                                                                                                                                                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                                                                                                                                                                                                                                        camera.position.set(6, 4, 6);

                                                                                                                                                                                                                                                const renderer = new THREE.WebGLRenderer({ antialias: true });
                                                                                                                                                                                                                                                        renderer.setSize(window.innerWidth, window.innerHeight);
                                                                                                                                                                                                                                                                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                                                                                                                                                                                                                                                                        document.body.appendChild(renderer.domElement);

                                                                                                                                                                                                                                                                                const controls = new OrbitControls(camera, renderer.domElement);
                                                                                                                                                                                                                                                                                        controls.enableDamping = true;

                                                                                                                                                                                                                                                                                                const params = {
                                                                                                                                                                                                                                                                                                            stars: 70000,
                                                                                                                                                                                                                                                                                                                        dust: 25000,
                                                                                                                                                                                                                                                                                                                                    backgroundStars: 15000,
                                                                                                                                                                                                                                                                                                                                                radius: 5,
                                                                                                                                                                                                                                                                                                                                                            branches: 3,
                                                                                                                                                                                                                                                                                                                                                                        spin: 1.2,
                                                                                                                                                                                                                                                                                                                                                                                    randomness: 0.3,
                                                                                                                                                                                                                                                                                                                                                                                                dustWidth: 0.8, // Niebla más ancha
                                                                                                                                                                                                                                                                                                                                                                                                            insideColor: '#ffbb33',
                                                                                                                                                                                                                                                                                                                                                                                                                        outsideColor: '#7a22ff'
                                                                                                                                                                                                                                                                                                                                                                                                                                };

                                                                                                                                                                                                                                                                                                                                                                                                                                        const group = new THREE.Group();
                                                                                                                                                                                                                                                                                                                                                                                                                                                scene.add(group);

                                                                                                                                                                                                                                                                                                                                                                                                                                                        // --- 1. ESTRELLAS DE FONDO (ESTÁTICAS) ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                const bgGeo = new THREE.BufferGeometry();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const bgPos = new Float32Array(params.backgroundStars * 3);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                for(let i = 0; i < params.backgroundStars * 3; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            bgPos[i] = (Math.random() - 0.5) * 100;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            bgGeo.setAttribute('position', new THREE.BufferAttribute(bgPos, 3));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const bgMat = new THREE.PointsMaterial({ size: 0.02, color: 0xffffff, transparent: true, opacity: 0.5 });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            scene.add(new THREE.Points(bgGeo, bgMat));

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // --- 2. GALAXIA (ESTRELLAS Y NIEBLA) ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const createGalaxy = (count, size, isDust) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const geo = new THREE.BufferGeometry();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const pos = new Float32Array(count * 3);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const col = new Float32Array(count * 3);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const cInside = new THREE.Color(params.insideColor);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const cOutside = new THREE.Color(params.outsideColor);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    for(let i = 0; i < count; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const i3 = i * 3;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const r = Math.random() * params.radius;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const angle = (i % params.branches) / params.branches * Math.PI * 2 + (r * params.spin);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // Dispersión mayor para la niebla
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const spread = isDust ? params.dustWidth : params.randomness;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const rx = Math.pow(Math.random(), 3) * (Math.random() < 0.5 ? 1 : -1) * spread * r;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const ry = Math.pow(Math.random(), 3) * (Math.random() < 0.5 ? 1 : -1) * (isDust ? 0.8 : 0.3) * r;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const rz = Math.pow(Math.random(), 3) * (Math.random() < 0.5 ? 1 : -1) * spread * r;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    pos[i3] = Math.cos(angle) * r + rx;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    pos[i3+1] = ry;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    pos[i3+2] = Math.sin(angle) * r + rz;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const mix = cInside.clone().lerp(cOutside, r / params.radius);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    col[i3] = mix.r; col[i3+1] = mix.g; col[i3+2] = mix.b;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        geo.setAttribute('color', new THREE.BufferAttribute(col, 3));

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return new THREE.Points(geo, new THREE.PointsMaterial({
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    size: size, transparent: true, opacity: isDust ? 0.15 : 0.8,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    depthWrite: false, blending: THREE.AdditiveBlending, vertexColors: true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                group.add(createGalaxy(params.stars, 0.01, false));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        group.add(createGalaxy(params.dust, 0.04, true));

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // --- 3. ESTRELLAS FUGACES DE COLORES ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const shootColors = [0x00ffff, 0xff00ff, 0xffff00, 0x00ff00, 0xffffff];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const launchShootingStar = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const start = new THREE.Vector3((Math.random()-0.5)*15, (Math.random()-0.5)*10, (Math.random()-0.5)*15);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const end = start.clone().add(new THREE.Vector3((Math.random()-0.5)*4, (Math.random()-0.5)*2, (Math.random()-0.5)*4));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const points = [start, start.clone()];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const geo = new THREE.BufferGeometry().setFromPoints(points);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const mat = new THREE.LineBasicMaterial({ 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: shootColors[Math.floor(Math.random() * shootColors.length)], 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                transparent: true, linewidth: 2 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const line = new THREE.Line(geo, mat);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    scene.add(line);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                let p = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const step = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            p += 0.04;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            points[1].lerp(end, p);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if(p > 0.5) points[0].lerp(end, (p-0.5)*2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            geo.setFromPoints(points);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            mat.opacity = 1.2 - p;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if(p < 1.2) requestAnimationFrame(step);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            else { scene.remove(line); geo.dispose(); mat.dispose(); }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    step();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // --- BUCLE DE ANIMACIÓN ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const clock = new THREE.Clock();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const animate = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const time = clock.getElapsedTime();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            group.rotation.y = time * 0.06;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(Math.random() < 0.015) launchShootingStar();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    controls.update();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                renderer.render(scene, camera);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            requestAnimationFrame(animate);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            animate();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    window.addEventListener('resize', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                camera.aspect = window.innerWidth / window.innerHeight;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            camera.updateProjectionMatrix();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        renderer.setSize(window.innerWidth, window.innerHeight);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                });
  </script>
</body>

</html>